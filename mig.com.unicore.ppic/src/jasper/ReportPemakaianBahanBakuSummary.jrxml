<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportPemakaianBahanBakuSummary" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="0644e906-aa51-49a2-ad70-1020d7d26698">
	<property name="ireport.zoom" value="0.9075000000000036"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="DateFrom" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="DateTo" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="AD_Org_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="M_Product_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
cl.name AS Client,
org.name AS org,
p.value as value,
prod.documentno as docno,
loc.value as Locator,
p.name AS product,
pd.primaryoutput_id as pd_id,
prod.productiondate as date,
COALESCE (uom.UOMsymbol,uom.name) AS UOM ,
uomconversiontostr(p.M_product_ID, (pd.movementqty * -1)) AS qtyString,
pd.MovementQty * -1 AS Qty

FROM UNS_Production prod
INNER JOIN AD_Client cl ON cl.AD_Client_ID=prod.AD_Client_ID
INNER JOIN AD_Org org ON org.AD_Org_ID=prod.AD_Org_ID
INNER JOIN UNS_Production_Detail pd ON pd.UNS_Production_ID=prod.UNS_Production_ID
INNER JOIN M_product p ON p.M_Product_ID=pd.M_Product_ID
INNER JOIN C_UOM uom ON uom.C_UOM_ID=p.C_UOM_ID
INNER JOIN M_Locator loc ON loc.M_Locator_ID=pd.M_Locator_ID

WHERE  prod.docstatus in ('CO','CL') AND pd.IsEndProduct='N' AND prod.movementdate between $P{DateFrom} and $P{DateTo} AND (Case When $P{M_Product_ID} is not null then p.M_Product_ID=$P{M_Product_ID}else 1=1 END) and prod.C_doctype_ID!=1000471
order by org.name, p.name, prod.productiondate]]>
	</queryString>
	<field name="client" class="java.lang.String"/>
	<field name="org" class="java.lang.String"/>
	<field name="value" class="java.lang.String"/>
	<field name="docno" class="java.lang.String"/>
	<field name="locator" class="java.lang.String"/>
	<field name="product" class="java.lang.String"/>
	<field name="pd_id" class="java.lang.Integer"/>
	<field name="date" class="java.sql.Timestamp"/>
	<field name="uom" class="java.lang.String"/>
	<field name="qtystring" class="java.lang.String"/>
	<field name="qty" class="java.math.BigDecimal"/>
	<variable name="Number" class="java.lang.Integer" resetType="Group" resetGroup="Product" calculation="Count">
		<variableExpression><![CDATA[$V{Number} == null ? 1 : $V{Number} + 1]]></variableExpression>
	</variable>
	<variable name="qty_1" class="java.math.BigDecimal" resetType="Group" resetGroup="Product" calculation="Sum">
		<variableExpression><![CDATA[$F{qty}]]></variableExpression>
	</variable>
	<group name="Org" isStartNewPage="true">
		<groupExpression><![CDATA[$F{org}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<staticText>
					<reportElement uuid="6c170d6b-83b6-4880-ae55-1a7e6380e6ee" x="0" y="0" width="79" height="20"/>
					<box leftPadding="3" rightPadding="3">
						<pen lineColor="#000000"/>
						<topPen lineColor="#000000"/>
						<leftPen lineColor="#000000"/>
						<bottomPen lineColor="#000000"/>
						<rightPen lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[Organisasi]]></text>
				</staticText>
				<textField>
					<reportElement uuid="a90acc80-dad3-4528-a326-60638e800c8b" x="88" y="0" width="467" height="20"/>
					<box leftPadding="3" rightPadding="3">
						<pen lineColor="#000000"/>
						<topPen lineColor="#000000"/>
						<leftPen lineColor="#000000"/>
						<bottomPen lineColor="#000000"/>
						<rightPen lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{org}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="b6afd7ca-d941-4f48-8386-c3b5b6d427e6" x="79" y="0" width="9" height="20"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[:]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="Product">
		<groupExpression><![CDATA[$F{product}]]></groupExpression>
		<groupHeader>
			<band height="37">
				<staticText>
					<reportElement uuid="d8c60a20-b89b-4e14-a063-76646c774370" x="239" y="18" width="55" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineStyle="Dashed"/>
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.5" lineStyle="Dashed"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Qty Input]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="3e9a9fb7-b0bf-4cdc-a3b8-9a216df17acf" x="0" y="18" width="22" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[No]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="9e0cb58d-77c3-4ec1-b7a9-8a00d48bac55" x="22" y="18" width="49" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Document]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="2a1dd51a-8227-42a5-9d5c-6b92ec02242b" x="121" y="18" width="118" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Locator Input]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="e011bcf7-c7db-49b7-a917-32697a7db6ce" x="71" y="18" width="51" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Date]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="80b6322c-9f90-468c-b01b-1bff7194d694" x="495" y="18" width="60" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Qty Output]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="ed05c11c-e9e6-47f2-a507-9660d3d55e97" x="305" y="18" width="190" height="19"/>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Product Output]]></text>
				</staticText>
				<line>
					<reportElement uuid="27891e9a-22bf-47f5-94cc-9550aaccf850" x="0" y="18" width="555" height="1"/>
					<graphicElement>
						<pen lineWidth="0.5"/>
					</graphicElement>
				</line>
				<line>
					<reportElement uuid="59d68fec-1f37-4acc-98af-ff678a00a808" x="0" y="36" width="555" height="1"/>
					<graphicElement>
						<pen lineWidth="0.5"/>
					</graphicElement>
				</line>
				<textField>
					<reportElement uuid="978ad073-a67f-45e9-aaaf-36f66568c329" x="88" y="0" width="467" height="20"/>
					<box leftPadding="3" rightPadding="3">
						<topPen lineWidth="0.0" lineStyle="Dashed"/>
						<leftPen lineWidth="0.0" lineStyle="Dashed"/>
						<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
						<rightPen lineWidth="0.0" lineStyle="Dashed"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{value} + " - " + $F{product}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="6c170d6b-83b6-4880-ae55-1a7e6380e6ee" x="0" y="0" width="79" height="20"/>
					<box leftPadding="3" rightPadding="3">
						<pen lineColor="#000000"/>
						<topPen lineColor="#000000"/>
						<leftPen lineColor="#000000"/>
						<bottomPen lineColor="#000000"/>
						<rightPen lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[Product]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="b6afd7ca-d941-4f48-8386-c3b5b6d427e6" x="79" y="0" width="9" height="20"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[:]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="27">
				<textField>
					<reportElement uuid="f1734bfe-64cf-4279-b648-b7ee7bd3ce81" x="0" y="0" width="228" height="20"/>
					<box>
						<topPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="10"/>
					</textElement>
					<textFieldExpression><![CDATA["Total Quantity "+ $F{product} + " :: "]]></textFieldExpression>
				</textField>
				<line>
					<reportElement uuid="0b91f085-e010-4da4-9582-6dd5df10d21a" x="0" y="19" width="555" height="1"/>
					<graphicElement>
						<pen lineWidth="0.5"/>
					</graphicElement>
				</line>
				<textField pattern="#,##0.0">
					<reportElement uuid="789422f0-0fa9-4848-ad38-5f27d87ba421" x="239" y="0" width="53" height="20"/>
					<box rightPadding="5">
						<topPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="10"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{qty_1}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="0cad701e-fc77-4871-9d3f-bc418c78bdb7" x="292" y="0" width="66" height="20"/>
					<box>
						<topPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="10"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{uom}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="74" splitType="Stretch">
			<staticText>
				<reportElement uuid="7ebe9a2a-d2b6-480a-9050-cd2417c42eb0" x="0" y="36" width="555" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="false" isItalic="true"/>
				</textElement>
				<text><![CDATA[Laporan Pemakaian Bahan Baku Produksi]]></text>
			</staticText>
			<textField>
				<reportElement uuid="3f0647bb-3bbf-4fa6-9ccb-a8256c6eb7c5" x="0" y="16" width="555" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="14" isBold="true" isUnderline="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{client}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="ba1583c5-a533-4bf2-8e0a-07ba42a3c32c" x="487" y="0" width="68" height="16"/>
				<textElement textAlignment="Right">
					<font size="8" isItalic="true"/>
				</textElement>
				<text><![CDATA[UntaCore ERP Report]]></text>
			</staticText>
			<textField pattern="dd-MMM-yyyy">
				<reportElement uuid="73b516c1-01ed-4eba-83af-80564c72aaa4" x="0" y="54" width="553" height="20"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["" + new SimpleDateFormat("dd/MM/yyyy").format($P{DateFrom}) + " - " + new SimpleDateFormat("dd/MM/yyyy").format($P{DateTo})]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement uuid="a472efaf-227e-43a8-a2b5-3cbb2bf87b8d" x="0" y="0" width="22" height="20"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Dashed"/>
					<leftPen lineWidth="0.0" lineStyle="Dashed"/>
					<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{Number}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="f4e1b407-3039-4f2f-b452-686b4d376a44" x="22" y="0" width="49" height="20"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Dashed"/>
					<leftPen lineWidth="0.0" lineStyle="Dashed"/>
					<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{docno}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement uuid="d57a9a25-9bba-4a8c-b036-144d1ed0e9b5" x="121" y="0" width="118" height="20"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Dashed"/>
					<leftPen lineWidth="0.0" lineStyle="Dashed"/>
					<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{locator}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.0">
				<reportElement uuid="face2df0-3d86-465d-9803-fbd32215f124" x="239" y="0" width="55" height="20"/>
				<box leftPadding="0" rightPadding="5">
					<pen lineStyle="Dashed"/>
					<topPen lineWidth="0.0" lineStyle="Dashed"/>
					<leftPen lineWidth="0.0" lineStyle="Dashed"/>
					<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
					<rightPen lineWidth="0.5" lineStyle="Dashed"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtystring}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="6aa81972-bca7-40a5-95ec-09ea8717f2f5" x="71" y="0" width="51" height="20"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Dashed"/>
					<leftPen lineWidth="0.0" lineStyle="Dashed"/>
					<bottomPen lineWidth="0.0" lineStyle="Dashed"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{date}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement uuid="8a30c0ff-e2a7-4fb2-aae5-d27ef5b9b8a6" x="305" y="0" width="250" height="20"/>
				<subreportParameter name="primary_id">
					<subreportParameterExpression><![CDATA[$F{pd_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "ReportPemakaianBahanBakuSummary_Subreport1.jasper"]]></subreportExpression>
			</subreport>
			<line>
				<reportElement uuid="ee504d09-26ed-4cba-adab-dfd5392d6d9d" x="0" y="19" width="555" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dotted"/>
				</graphicElement>
			</line>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="15" splitType="Stretch">
			<textField>
				<reportElement uuid="6b81c303-5dd8-4dc2-87ec-fa316aa4c78b" x="433" y="0" width="80" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement uuid="39899de5-63eb-4a7b-97cd-337f781b8d86" x="513" y="0" width="40" height="15"/>
				<textElement verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>

<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PrintSuratPengirimanBarangFromInOut" language="groovy" pageWidth="611" pageHeight="395" columnWidth="571" leftMargin="20" rightMargin="20" topMargin="10" bottomMargin="10" uuid="9aed1e3a-6bff-41e6-a26c-90a889ce4a88">
	<property name="ireport.zoom" value="1.1566298682885954"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="M_InOut_ID" class="java.lang.Integer"/>
	<parameter name="UNS_Shipping_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select COALESCE(sh.DocumentNo, shh.DocumentNo, '') as NoShipping, COALESCE(sh.DateDoc, shh.DateDoc, now()) as tglship, io.DocumentNo as nopacking, io.MovementDate as tglpl,now() as TglSekarang, COALESCE (at.Name, att.Name, '-') AS TipeKendaraan, COALESCE (ar.value, arr.value, '-') AS NoKendaraan, COALESCE(sh.driver, shh.Driver, '-') AS Supir, mp.name as namabarang, uomconversiontostr(mp.m_product_id,iol.MovementQty) as qtykirim, --COALESCE(po.POReference, '-') AS reference,
COALESCE(io.description, '-') AS reference,
concat_ws('',coalesce(cl.address1,''),coalesce(cl.address2,''),coalesce(cl.address3,''),coalesce(cl.address4,'')) as al,cbll.bpartnername as nm, toko.Name AS NamaToko

FROM M_InOut io

INNER JOIN M_InOutLine iol ON iol.M_Inout_ID = io.M_InOut_ID
INNER JOIN AD_Org org ON org.AD_Org_ID = iol.AD_Org_ID
INNER JOIN M_Product mp ON mp.M_Product_ID = iol.M_Product_ID
INNER JOIN C_BPartner toko ON toko.C_BPartner_ID = io.C_BPartner_ID
INNER JOIN C_OrderLine sol ON sol.C_OrderLine_ID = iol.C_OrderLine_ID
INNER JOIN C_OrderLine pol ON pol.C_OrderLine_ID = sol.Reference_ID
INNER JOIN C_Order po ON po.C_Order_ID = pol.C_Order_ID

LEFT JOIN UNS_ShippingFreight sf ON sf.M_InOut_ID = io.M_InOut_ID
LEFT JOIN UNS_Shipping sh ON sh.UNS_Shipping_ID = sf.UNS_Shipping_ID
LEFT JOIN UNS_Armada ar ON ar.UNS_Armada_ID = sh.UNS_Armada_ID
LEFT JOIN UNS_ArmadaType at ON at.UNS_ArmadaType_ID = ar.UNS_ArmadaType_ID

LEFT JOIN UNS_ExpeditionDetail ed ON ed.M_InOut_ID = io.M_InOut_ID AND ed.JobSODetail_ID IS NULL
LEFT JOIN UNS_Expedition exp ON exp.JOBSO_ID = ed.UNS_Expedition_ID
LEFT JOIN UNS_ShippingFreight sff ON sff.UNS_Expedition_ID = exp.UNS_Expedition_ID
LEFT JOIN UNS_Shipping shh ON shh.UNS_Shipping_ID = sff.UNS_Shipping_ID
LEFT JOIN UNS_Armada arr ON arr.UNS_Armada_ID = shh.UNS_Armada_ID
LEFT JOIN UNS_ArmadaType att ON att.UNS_ArmadaType_ID = arr.UNS_ArmadaType_ID

INNER JOIN C_BPartner cb on cb.C_BPartner_ID =io.DropShip_BPartner_ID
INNER JOIN C_BPartner_Location cbll on cb.C_BPartner_ID=cbll.C_BPartner_ID
INNER JOIN C_Location cl on cl.C_Location_ID=cbll.C_Location_ID

WHERE CASE WHEN $P{M_InOut_ID} > 0 THEN io.M_InOut_ID = $P{M_InOut_ID} ELSE $P{UNS_Shipping_ID} IN (sh.UNS_Shipping_ID, shh.UNS_Shipping_ID) END]]>
	</queryString>
	<field name="noshipping" class="java.lang.String"/>
	<field name="tglship" class="java.sql.Timestamp"/>
	<field name="nopacking" class="java.lang.String"/>
	<field name="tglpl" class="java.sql.Timestamp"/>
	<field name="tglsekarang" class="java.sql.Timestamp"/>
	<field name="tipekendaraan" class="java.lang.String"/>
	<field name="nokendaraan" class="java.lang.String"/>
	<field name="supir" class="java.lang.String"/>
	<field name="namabarang" class="java.lang.String"/>
	<field name="qtykirim" class="java.lang.String"/>
	<field name="reference" class="java.lang.String"/>
	<field name="al" class="java.lang.String"/>
	<field name="nm" class="java.lang.String"/>
	<field name="namatoko" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="164" splitType="Stretch">
			<printWhenExpression><![CDATA[$V{PAGE_NUMBER}.intValue() == 1? new Boolean(true) : new Boolean(false)]]></printWhenExpression>
			<rectangle>
				<reportElement uuid="50417baa-c5bd-4aec-bfbc-b1d528e2d45e" x="1" y="149" width="554" height="15"/>
				<graphicElement>
					<pen lineWidth="1.0" lineStyle="Dashed"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement uuid="4394551b-a8f4-45b5-be90-a0ba76672501" x="143" y="149" width="190" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<text><![CDATA[Nama Barang]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="bf3d61a0-aca1-4656-b5ba-acd89d7adc2a" x="333" y="149" width="156" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<text><![CDATA[Jumlah]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="861b604d-3695-4709-900b-7859552b33ad" x="1" y="0" width="88" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[CV. Fajar Lestari]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="7ce3aa82-8165-48e5-a3a1-06e198f7ff64" x="1" y="10" width="172" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Jl. KH. Agus Anang No. 2 Bandar Lampung]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="7e4813fe-e2e9-4454-8488-5f9863c21b70" x="1" y="20" width="172" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Telp. (0721)-31914,33307,32823]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a0e8e25e-694f-4e3d-94f3-8218339b7ea5" x="1" y="47" width="172" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Kepada Yth:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="9e71a173-81b0-4e06-8741-78290bcd8d13" x="371" y="0" width="68" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[No. Shipping]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b6b8bd22-db6d-41f6-8748-2efc041e6ed4" x="349" y="22" width="90" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[No. Packing List / DO]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="ecd9b064-b573-4b39-8484-f0e28ab55941" x="1" y="104" width="570" height="13"/>
				<textElement textAlignment="Center">
					<font size="10"/>
				</textElement>
				<text><![CDATA[SURAT PENGAMBILAN BARANG]]></text>
			</staticText>
			<textField>
				<reportElement uuid="a8999962-e46a-40bd-a5b7-ec1e75969ed3" x="439" y="0" width="100" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[": "+$F{noshipping}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="0608b93e-9486-4bd0-98e0-9207c9b1cd23" x="371" y="11" width="68" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Tgl. Shipping]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b9cb7a6f-eda0-4844-9a44-0a999c270d02" x="349" y="33" width="90" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Tgl. Packing List / DO]]></text>
			</staticText>
			<textField>
				<reportElement uuid="1958b149-d416-49f1-a8c7-bbfc515c0c6f" x="439" y="22" width="100" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[": "+$F{nopacking}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="5f496122-cb61-4bd5-bda1-5859a5391562" x="439" y="11" width="100" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[": "+new SimpleDateFormat("dd-MM-yyyy").format($F{tglship})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0e0f8afe-722f-40c1-8c6d-43d51abbcdfa" x="439" y="33" width="100" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[": "+new SimpleDateFormat("dd-MM-yyyy").format($F{tglpl})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="89a1b2e3-658a-4499-91be-68d1af0e4808" x="1" y="31" width="172" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Fax. (0721)-32010]]></text>
			</staticText>
			<textField isStretchWithOverflow="true">
				<reportElement uuid="99bf2b5a-2a66-4f16-a571-becaff5c6cc9" x="1" y="117" width="570" height="32"/>
				<textElement/>
				<textFieldExpression><![CDATA["Berdasarkan nomor SO yang tertera, harap diberikan barang-barang tersebut dibawah ini kepada Supir "+$F{supir} +" Nomor Kendaraan "+$F{nokendaraan}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="4066c7fd-263a-4703-8c54-2469954e18ac" x="349" y="50" width="100" height="11"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Untuk Toko :]]></text>
			</staticText>
			<textField>
				<reportElement uuid="17933d7b-862a-49ad-b019-0c239da42037" x="349" y="61" width="206" height="33"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{namatoko}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="52b5f7b5-db8d-42be-a83f-53f1eea7ddf7" x="1" y="57" width="248" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nm}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement uuid="fc4b8dca-1026-4fad-bbe9-34a0d63c878e" x="1" y="67" width="237" height="37"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{al}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="4394551b-a8f4-45b5-be90-a0ba76672501" x="0" y="149" width="143" height="15"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<text><![CDATA[SO]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="16">
			<textField>
				<reportElement uuid="34aa4088-d74d-4edd-9b06-9a451ebc929d" x="143" y="0" width="190" height="16"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{namabarang}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="1c00b7fa-66dd-4c8a-a762-f54c2d5bcd92" x="333" y="0" width="156" height="16"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtykirim}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="34aa4088-d74d-4edd-9b06-9a451ebc929d" x="0" y="0" width="143" height="16"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{reference}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="73">
			<staticText>
				<reportElement uuid="26d608ed-f4f6-402a-bb51-b0a9aba11e21" x="0" y="54" width="125" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[( Adm. Penjualan )]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="bc4d97bb-3177-417b-bcbf-59b67668e128" x="424" y="54" width="147" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[( Supir )]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="f7e30966-2bcf-4055-af8f-cfa092ed29cf" x="284" y="54" width="114" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[( KA. Penjualan )]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="7f14bc22-0a73-42a3-a626-2861c05a2a22" x="424" y="6" width="147" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[Diterima Oleh,]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="fc48c85b-1ed8-4769-bf16-5164b53a6fb6" x="284" y="6" width="114" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[Disetujui Oleh,]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="8c2f5e5e-b607-4a74-860a-b317da8f594a" x="0" y="6" width="125" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[Dibuat Oleh, ]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b2058fc4-29a7-45a0-8338-259b204d0144" x="154" y="6" width="114" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[Diketahui oleh,]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="62a45175-bb70-4aff-b8df-c2dce7cc607b" x="154" y="54" width="114" height="15"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[( Expedisi )]]></text>
			</staticText>
			<line>
				<reportElement uuid="e3c16ca4-adaf-4cfb-aeca-984bd8d5ba34" x="0" y="0" width="555" height="1"/>
			</line>
		</band>
	</columnFooter>
</jasperReport>

<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ListOfVoucherByInvoice" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="90f5ccce-42da-445d-ac5d-edac8011faea">
	<property name="ireport.zoom" value="1.4641000000000015"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="1"/>
	<parameter name="C_Invoice_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT sh.DocumentNo, i.DocumentNo AS Invoice, i.DateInvoiced AS DateInvoice, bp.Name AS Partner, i.GrandTotal AS TotalInv, il.C_InvoiceLine_ID AS IDLine, cc.Name AS Charge, il.QtyInvoiced AS Qty, il.PriceActual AS Price, il.LineNetAmt AS LineAmt, COALESCE(il.Description, '') AS DescLine, COALESCE(shd.DateDoc, rs.DateTrx) AS DateUse, COALESCE(shd.DocumentNo, rs.DocumentNo) AS Document, cd.VoucherCode AS Voucher, COALESCE(shd.Driver, bprs.Name, '') AS UsedBy, COALESCE(ar.Name, cd.VehicleNo, '') AS VehicleNo, (CASE WHEN sh.UNS_Shipping_ID IS NOT NULL THEN ori.Name || ' - ' || des.Name ELSE cd.Description END) AS Activity, cd.Liters AS Liters FROM C_Invoice i

INNER JOIN C_BPartner bp ON bp.C_BPartner_ID = i.C_BPartner_ID
INNER JOIN C_InvoiceLine il ON il.C_Invoice_ID = i.C_Invoice_ID
INNER JOIN C_Charge cc ON cc.C_Charge_ID = il.C_Charge_ID
INNER JOIN UNS_Charge_Detail cd ON cd.C_InvoiceLine_ID = il.C_InvoiceLine_ID
LEFT JOIN UNS_Shipping sh ON sh.UNS_Shipping_ID = cd.UNS_Shipping_ID AND sh.Status = 'RS'
LEFT JOIN UNS_Shipping shd ON shd.UNS_Shipping_ID = sh.UNS_Shipping_Reff_ID
LEFT JOIN UNS_Armada ar ON ar.UNS_Armada_ID = sh.UNS_Armada_ID
LEFT JOIN C_City ori ON ori.C_City_ID = sh.Origin_ID
LEFT JOIN C_City des ON des.C_City_ID = sh.Destination_ID
LEFT JOIN UNS_Charge_RS rs ON rs.UNS_Charge_RS_ID = cd.UNS_Charge_RS_ID
LEFT JOIN C_BPartner bprs ON bprs.C_BPartner_ID = rs.C_BPartner_ID

WHERE i.C_Invoice_ID=$P{C_Invoice_ID}

ORDER BY il.Line ASC, DateUse ASC, VoucherCode ASC]]>
	</queryString>
	<field name="documentno" class="java.lang.String"/>
	<field name="invoice" class="java.lang.String"/>
	<field name="dateinvoice" class="java.sql.Timestamp"/>
	<field name="partner" class="java.lang.String"/>
	<field name="totalinv" class="java.math.BigDecimal"/>
	<field name="idline" class="java.math.BigDecimal"/>
	<field name="charge" class="java.lang.String"/>
	<field name="qty" class="java.math.BigDecimal"/>
	<field name="price" class="java.math.BigDecimal"/>
	<field name="lineamt" class="java.math.BigDecimal"/>
	<field name="descline" class="java.lang.String"/>
	<field name="dateuse" class="java.sql.Timestamp"/>
	<field name="document" class="java.lang.String"/>
	<field name="voucher" class="java.lang.String"/>
	<field name="usedby" class="java.lang.String"/>
	<field name="vehicleno" class="java.lang.String"/>
	<field name="activity" class="java.lang.String"/>
	<field name="liters" class="java.math.BigDecimal"/>
	<variable name="price_liters" class="java.math.BigDecimal" resetType="Column">
		<variableExpression><![CDATA[$F{price}.multiply($F{liters})]]></variableExpression>
	</variable>
	<variable name="sum_liters" class="java.math.BigDecimal" resetType="Group" resetGroup="InvLine" calculation="Sum">
		<variableExpression><![CDATA[$F{liters}]]></variableExpression>
	</variable>
	<variable name="sum_price_liters" class="java.math.BigDecimal" resetType="Group" resetGroup="InvLine" calculation="Sum">
		<variableExpression><![CDATA[$V{price_liters}]]></variableExpression>
	</variable>
	<variable name="sum_liters_all" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{liters}]]></variableExpression>
	</variable>
	<variable name="sum_price_all" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{price_liters}]]></variableExpression>
	</variable>
	<group name="InvLine">
		<groupExpression><![CDATA[$F{idline}]]></groupExpression>
		<groupHeader>
			<band height="62">
				<staticText>
					<reportElement uuid="7ed5ba31-fdc3-4e21-b8fd-7ffec4b9f0b6" x="0" y="47" width="50" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Date Use]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="3629929a-7c96-407e-a92b-230b19a88174" x="100" y="47" width="53" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Voucher Code]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="9f8693a8-662d-4fd7-a67d-8021e3f42a61" x="285" y="47" width="160" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Origin - Destination (Description)]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="b04476af-ed4c-4adb-8946-8306c6f7db77" x="445" y="47" width="40" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Liters]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="b04476af-ed4c-4adb-8946-8306c6f7db77" x="485" y="47" width="70" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Price]]></text>
				</staticText>
				<line>
					<reportElement uuid="8c2aed5b-064a-40ca-9a3f-d4d1a3bcae13" x="0" y="61" width="555" height="1"/>
					<graphicElement>
						<pen lineWidth="0.5"/>
					</graphicElement>
				</line>
				<textField>
					<reportElement uuid="9e6e7be5-5521-43b4-8d7a-2bf7b0335f47" x="100" y="0" width="165" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{charge}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="89490982-d7fe-4b8b-89cc-7ed82faa12fb" x="100" y="30" width="455" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{descline}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement uuid="d4ed4461-546a-4222-81e3-3f4cea521d37" x="365" y="15" width="190" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{lineamt}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement uuid="aa2c8fd6-0735-4415-b1f8-485ffdc143ef" x="365" y="0" width="190" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{price}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="14a4147e-5766-4ab1-bdc8-9a7a9bd01446" x="100" y="15" width="165" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{qty}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="cd2c314c-8d94-4c70-a939-d615435ee6ab" x="0" y="0" width="100" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Charge]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="1530b2e9-74fa-4fdd-83e1-26ea0f9c27e1" x="0" y="15" width="100" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Qty]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="c9f43604-dff0-4c21-8470-c62a7c4ac4c5" x="265" y="0" width="100" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Price]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="a9ec2a66-17df-46f8-bec1-7b751232bda6" x="265" y="15" width="100" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Total Lines]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="7c27fbda-eb8d-4a97-8a97-ee45363e2d95" x="0" y="30" width="100" height="15"/>
					<box leftPadding="2" rightPadding="2"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Description]]></text>
				</staticText>
				<line>
					<reportElement uuid="8c2aed5b-064a-40ca-9a3f-d4d1a3bcae13" x="0" y="44" width="555" height="1"/>
					<graphicElement>
						<pen lineWidth="0.5"/>
					</graphicElement>
				</line>
				<staticText>
					<reportElement uuid="3629929a-7c96-407e-a92b-230b19a88174" x="153" y="47" width="67" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Used By]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="3629929a-7c96-407e-a92b-230b19a88174" x="220" y="47" width="65" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Vehicle No]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="3629929a-7c96-407e-a92b-230b19a88174" x="50" y="47" width="50" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Document]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="21">
				<textField pattern="#,##0.00">
					<reportElement uuid="2f17cf85-28ea-4477-a276-2d20a19d09ff" x="485" y="0" width="70" height="15"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{sum_price_liters}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement uuid="2f17cf85-28ea-4477-a276-2d20a19d09ff" x="445" y="0" width="40" height="15"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{sum_liters}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement uuid="f6f4925b-48a4-4413-b6f3-5d66f6ac3b2b" x="0" y="14" width="555" height="1"/>
					<graphicElement>
						<pen lineWidth="1.0"/>
					</graphicElement>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement uuid="38cd983f-3227-43b9-9088-7846e4b01eb5" x="0" y="0" width="555" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[List Of Voucher (Invoice)]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b04476af-ed4c-4adb-8946-8306c6f7db77" x="414" y="0" width="98" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Top">
					<font size="8" isBold="true" isItalic="true"/>
				</textElement>
				<text><![CDATA[UntaCore ERP]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="44" splitType="Stretch">
			<textField>
				<reportElement uuid="f17f5462-373a-4034-af35-496257e0f52e" x="100" y="0" width="165" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[": " + $F{invoice}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="b5e9722d-993c-4f23-8279-d12504d8b477" x="0" y="0" width="100" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Invoice]]></text>
			</staticText>
			<textField>
				<reportElement uuid="b0d6eec5-3a3b-4f58-97ab-abb1af7740d3" x="100" y="20" width="165" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[": " + new SimpleDateFormat("dd-MM-yyy").format($F{dateinvoice})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="1102565e-e878-4840-807a-8f8dc72387d6" x="365" y="0" width="190" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[": " + $F{partner}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="3f75c07a-cfc2-44f7-b247-924b7cb49099" x="370" y="20" width="185" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalinv}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="444c3644-bed2-4bc0-a9de-fa558cbba804" x="0" y="20" width="100" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="cab4e35c-e7b4-4380-a4c1-b60f05c4e2ce" x="265" y="0" width="100" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Partner]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="55f199ee-9fd9-43a6-8be2-dc9340305cbf" x="265" y="20" width="100" height="20"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="9c587282-63cc-49ab-b041-fee223224595" x="367" y="20" width="5" height="20"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[:]]></text>
			</staticText>
			<line>
				<reportElement uuid="0242863d-8d61-48dc-bd1d-3fae44c583af" x="0" y="41" width="555" height="3"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Double"/>
				</graphicElement>
			</line>
		</band>
	</pageHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="fb9136a8-5c30-44c1-aea5-2d7bb66b951f" x="0" y="0" width="50" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dateuse}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="27d5cfcd-1754-4dfb-957d-7fea36fbdaf5" x="100" y="0" width="53" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{voucher}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="1363a721-fef7-4627-ab61-b4e35a7ee99c" x="285" y="0" width="160" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{activity}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="2f17cf85-28ea-4477-a276-2d20a19d09ff" x="445" y="0" width="40" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{liters}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="2f17cf85-28ea-4477-a276-2d20a19d09ff" x="485" y="0" width="70" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{price_liters}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="f6f4925b-48a4-4413-b6f3-5d66f6ac3b2b" x="0" y="14" width="555" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement uuid="27d5cfcd-1754-4dfb-957d-7fea36fbdaf5" x="153" y="0" width="67" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{usedby}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="27d5cfcd-1754-4dfb-957d-7fea36fbdaf5" x="220" y="0" width="65" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vehicleno}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="27d5cfcd-1754-4dfb-957d-7fea36fbdaf5" x="50" y="0" width="50" height="15"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{document}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="15">
			<textField pattern="#,##0.00">
				<reportElement uuid="2f17cf85-28ea-4477-a276-2d20a19d09ff" x="445" y="0" width="40" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_liters_all}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="2f17cf85-28ea-4477-a276-2d20a19d09ff" x="485" y="0" width="70" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_price_all}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>

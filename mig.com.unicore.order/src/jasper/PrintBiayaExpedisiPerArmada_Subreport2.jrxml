<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PrintBiayaExpedisiPerArmada_Subreport2" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d0863483-25c7-4237-8ebb-971ee6472a2c">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="StartDate" class="java.util.Date"/>
	<parameter name="EndDate" class="java.util.Date"/>
	<parameter name="UNS_Armada_ID" class="java.lang.Integer"/>
	<parameter name="AD_User_ID" class="java.lang.Integer"/>
	<parameter name="TypeReport" class="java.lang.String"/>
	<queryString>
		<![CDATA[select now() tglskrg,org.name as org,u.name as uctk,amd.name as nmarmada,sum(case when cd.chargetype='CS' then cd.amount else 0 end) as tcost,
sum(case when cd.chargetype='VC' then cd.amount else 0 end) as Vcost
from UNS_Shipping sh
left join UNS_Charge_Detail cd on cd.uns_shipping_id=sh.uns_shipping_id and cd.iscancelled='N'
inner join uns_armada amd on sh.uns_armada_id=amd.uns_armada_id
left join ad_org org on org.ad_org_id=sh.ad_org_id
left join ad_user u on ad_user_id=$P{AD_User_ID}
where case when $P{UNS_Armada_ID}!=0 then amd.uns_armada_id=$P{UNS_Armada_ID} else 1=1 end
and sh.datedoc between $P{StartDate} and $P{EndDate}
AND sh.status='RS' AND sh.docstatus IN ('CO', 'CL')
group by u.name,org.name,amd.name
order by org.name]]>
	</queryString>
	<field name="tglskrg" class="java.sql.Timestamp"/>
	<field name="org" class="java.lang.String"/>
	<field name="uctk" class="java.lang.String"/>
	<field name="nmarmada" class="java.lang.String"/>
	<field name="tcost" class="java.math.BigDecimal"/>
	<field name="vcost" class="java.math.BigDecimal"/>
	<variable name="tcost" class="java.lang.Integer" resetType="Group" resetGroup="organisasi" calculation="Sum">
		<variableExpression><![CDATA[$F{tcost}]]></variableExpression>
	</variable>
	<variable name="tvou" class="java.lang.Integer" resetType="Group" resetGroup="organisasi" calculation="Sum">
		<variableExpression><![CDATA[$F{vcost}]]></variableExpression>
	</variable>
	<variable name="no" class="java.lang.Integer" resetType="Group" resetGroup="organisasi" calculation="Count">
		<variableExpression><![CDATA[new Integer('1')]]></variableExpression>
	</variable>
	<variable name="ttcost" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{tcost}]]></variableExpression>
	</variable>
	<variable name="ttvou" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{vcost}]]></variableExpression>
	</variable>
	<group name="organisasi">
		<groupExpression><![CDATA[$F{org}]]></groupExpression>
		<groupHeader>
			<band height="18">
				<textField>
					<reportElement uuid="9ef08434-9b63-4be5-b5d1-dc5d7eb9ce31" x="21" y="3" width="130" height="15"/>
					<textElement>
						<font isBold="true" isUnderline="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{org}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="16">
				<textField pattern="#,##0.00">
					<reportElement uuid="284ebfeb-6582-491d-8896-b075d7470eab" x="310" y="0" width="100" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression><![CDATA[$V{tcost}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement uuid="08cd789d-0c56-42d5-90a0-23aef3677ded" x="442" y="0" width="100" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression><![CDATA[$V{tvou}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="eddf32f8-15e6-4ae9-b875-fe0949924a8e" x="81" y="0" width="229" height="14"/>
					<textElement/>
					<textFieldExpression><![CDATA['Total Organisasi ------> '+ $F{org}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="28" splitType="Stretch">
			<staticText>
				<reportElement uuid="9223c690-55ad-4630-8466-6c564c10125b" x="0" y="0" width="555" height="14"/>
				<textElement textAlignment="Center">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Rekap Biaya Expedisi]]></text>
			</staticText>
			<textField>
				<reportElement uuid="3725ebb9-9d79-4bd3-9d91-1ded2e20ba27" x="0" y="12" width="555" height="12"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA['Periode Tanggal '+new SimpleDateFormat("dd/MM/yyyy").format($P{StartDate})+' sampai '+
new SimpleDateFormat("dd/MM/yyyy").format($P{EndDate})]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="22" splitType="Stretch">
			<staticText>
				<reportElement uuid="ed56bf2a-2f6f-411e-9d39-9b986f622924" x="0" y="5" width="21" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[No]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="9e225e4c-ae00-487d-a342-a3510aca80cf" x="44" y="5" width="130" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[KODE KENDARAAN]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="149a7826-fb71-4a33-ba09-43ed55c7bb51" x="425" y="5" width="117" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[VOUCHER]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="24863b89-c236-4b2e-80ff-1207c6cdea6e" x="293" y="5" width="117" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[COST]]></text>
			</staticText>
			<line>
				<reportElement uuid="96f94814-a900-4451-b1f6-47ed85afe690" x="0" y="18" width="555" height="1"/>
				<graphicElement>
					<pen lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<line>
				<reportElement uuid="1cfa3d9d-bc15-4e91-80ac-94929aa14a96" x="0" y="1" width="555" height="1"/>
				<graphicElement>
					<pen lineStyle="Dashed"/>
				</graphicElement>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField pattern="#,##0.00">
				<reportElement uuid="7029d9b8-aabe-4b33-910f-32328569d8ad" x="310" y="0" width="100" height="14"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{tcost}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="06ae2eb1-742f-4bb4-975c-ffe5a66f49af" x="442" y="0" width="100" height="14"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{vcost}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0a1dbec0-3405-4faf-94fe-a94c66c3631e" x="44" y="0" width="130" height="14"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{nmarmada}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="950c6746-3be1-458e-b110-f92e06736eb0" x="0" y="1" width="32" height="14"/>
				<textElement/>
				<textFieldExpression><![CDATA[$V{no}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="54" splitType="Stretch">
			<textField pattern="#,##0.00">
				<reportElement uuid="632a2294-9739-467c-ae3d-ae7d9005133d" x="310" y="0" width="100" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{ttcost}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="d51758fd-8962-41ec-8a21-3efd8b30b4ed" x="442" y="0" width="100" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{ttvou}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="51458659-9936-4057-ab66-25dce6aa84db" x="174" y="0" width="136" height="20"/>
				<textElement/>
				<text><![CDATA[Grand Total]]></text>
			</staticText>
			<textField>
				<reportElement uuid="5691ed9b-9cb8-45fe-b221-eb4ecb4c01d4" x="0" y="34" width="151" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA['User Cetak :'+$F{uctk}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0a8dc3e1-261b-4278-ac70-1a27cc1566a0" x="395" y="34" width="147" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA['Tgl Cetak :'+new SimpleDateFormat("dd/MM/yyyy").format($F{tglskrg})]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="45d140d6-65e4-47f4-95aa-85fac4c35c35" x="0" y="26" width="555" height="1"/>
				<graphicElement>
					<pen lineStyle="Dashed"/>
				</graphicElement>
			</line>
		</band>
	</pageFooter>
</jasperReport>

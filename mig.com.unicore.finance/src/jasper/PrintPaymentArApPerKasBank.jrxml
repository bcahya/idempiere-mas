<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PrintPaymentArPerKasBank" language="groovy" pageWidth="611" pageHeight="395" columnWidth="581" leftMargin="10" rightMargin="20" topMargin="5" bottomMargin="20" uuid="5548d939-66a9-4be5-9a86-8ec2a03876f3">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="StartDate" class="java.util.Date"/>
	<parameter name="EndDate" class="java.util.Date"/>
	<parameter name="C_BankAccount_ID" class="java.lang.Integer"/>
	<parameter name="AD_User_ID" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select data.tglskrg,data.nmuser,data.tgltrx,data.nodoc,data.bankname,data.name,data.nofaktur,data.gttot,data.ctunai,
data.dtunai
from
(select now() tglskrg,u.name as nmuser,cp.datetrx as tgltrx,cp.documentno as nodoc,ba.name as bankname,cb.name,ci.documentno as nofaktur,ci.grandtotal as gttot,case when cp.docstatus IN('CO','CL') then cpa.amount else 0 end as ctunai,
case when cp.docstatus IN('PR','IV') then cpa.amount else 0 end as dtunai
from C_Payment cp
left join c_paymentallocate cpa on cpa.c_payment_id=cp.c_payment_id
inner join c_invoice ci on ci.c_invoice_id=cpa.c_invoice_id
left join c_bpartner cb on cb.c_bpartner_id=ci.c_bpartner_id
left join c_bankaccount ba on ba.c_bankaccount_id=cp.c_bankaccount_id
left join ad_user u on u.ad_user_id = $P{AD_User_ID}
where
cp.datetrx between $P{StartDate} and $P{EndDate} and
cp.c_bankaccount_id=$P{C_BankAccount_ID} AND
cp.docstatus<>'VO'
union all
select now() tglskrg,u.name as nmuser,cp.datetrx as tgltrx,cp.documentno as nodoc,ba.name as bankname,cb.name,ci.documentno as nofaktur,ci.grandtotal as gttot,
case when cp.docstatus in('CO','CL') then cp.totalamt else 0 end as ctunai,
case when cp.docstatus in('PR','IV') then cp.totalamt else 0 end as dtunai
from C_Payment cp
left join c_paymentallocate cpa on cpa.c_payment_id=cp.c_payment_id
inner join c_order co on cp.c_order_id=co.c_order_id
inner join c_invoice ci on ci.c_order_id=co.c_order_id
left join c_bpartner cb on cb.c_bpartner_id=ci.c_bpartner_id
left join c_bankaccount ba on ba.c_bankaccount_id=cp.c_bankaccount_id
left join ad_user u on u.ad_user_id = $P{AD_User_ID}
where
cp.datetrx between $P{StartDate} and $P{EndDate} and
cp.c_bankaccount_id=$P{C_BankAccount_ID} AND
cp.docstatus <>'VO') as data
order by data.tgltrx]]>
	</queryString>
	<field name="tglskrg" class="java.sql.Timestamp"/>
	<field name="nmuser" class="java.lang.String"/>
	<field name="tgltrx" class="java.sql.Timestamp"/>
	<field name="nodoc" class="java.lang.String"/>
	<field name="bankname" class="java.lang.String"/>
	<field name="name" class="java.lang.String"/>
	<field name="nofaktur" class="java.lang.String"/>
	<field name="gttot" class="java.math.BigDecimal"/>
	<field name="ctunai" class="java.math.BigDecimal"/>
	<field name="dtunai" class="java.math.BigDecimal"/>
	<variable name="nourut" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[new Integer("1")]]></variableExpression>
	</variable>
	<variable name="Tcomplet" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ctunai}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement uuid="89ee06dc-88dc-4ddd-a6bc-86760cdd1435" x="0" y="0" width="571" height="20"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Laporan Payment]]></text>
			</staticText>
			<textField>
				<reportElement uuid="59622aca-3efd-4450-9a54-f84d9ddfa3a7" x="0" y="36" width="260" height="20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA['Periode Tanggal : '+
new SimpleDateFormat("dd/MM/yyyy").format($P{StartDate})+' s/d '+
new SimpleDateFormat("dd/MM/yyyy").format($P{EndDate})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="fb380d3c-2e5b-4878-b011-7c6af4747b0e" x="0" y="20" width="571" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{bankname}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="31c18536-93c2-4b50-91ce-fc51f0251e9a" x="0" y="60" width="26" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[No]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="9ee0e95c-ebe0-4df6-9c0e-d3749d1d47fd" x="28" y="60" width="55" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Tgl Payment]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="37cc6369-a6c3-499c-aeb0-5b44a5786c52" x="89" y="60" width="55" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[No. Payment]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3fbc32c9-111b-4ac9-ac02-b7a61d9a0dac" x="147" y="60" width="49" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[No Faktur]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="6aa6063d-6615-4a3d-93dd-a8af1e6d220e" x="200" y="60" width="110" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Nama Toko]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="f9befe6f-2888-412f-997c-1eae91dd6423" x="312" y="60" width="62" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Total Invoice]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="ee7fab7d-5c59-4e44-9ac3-ca65ea51f9f9" x="378" y="49" width="165" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Status Payment]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="370edb7e-372d-405b-a396-e77c7e7669d6" x="378" y="60" width="62" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Complet]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e4ffc779-8bea-40e8-b3d6-fd4d9319eb79" x="481" y="60" width="62" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Not complet]]></text>
			</staticText>
			<line>
				<reportElement uuid="a6256598-f5ed-4d2c-bba0-2cfde56d15ad" x="0" y="74" width="571" height="1"/>
				<graphicElement>
					<pen lineStyle="Dashed"/>
				</graphicElement>
			</line>
		</band>
	</pageHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="67aaaa5c-ba13-4c2f-bcfc-f41613f7f945" x="28" y="0" width="55" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tgltrx}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="b15a9cd8-3a66-4e9d-9bc7-ccda678d67c4" x="89" y="0" width="55" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nodoc}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="4a19af7c-8148-47ad-9a23-98b928e19c6f" x="147" y="0" width="49" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nofaktur}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="f447c1d6-2e79-4478-9798-d1b14b314fff" x="310" y="0" width="64" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gttot}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="b19ee00f-0599-4f10-960a-95ed956fb777" x="382" y="0" width="58" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ctunai}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="48d42ab2-bdca-4acc-b9c1-bbcda70e1248" x="482" y="0" width="61" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dtunai}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="2bfca23a-8841-4696-8549-4a13738be6dd" x="0" y="0" width="26" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{nourut}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="c3615408-a9ca-4efc-9b8e-1ffb6bdb2f02" x="200" y="0" width="99" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="6" splitType="Stretch"/>
	</pageFooter>
	<lastPageFooter>
		<band height="105">
			<line>
				<reportElement uuid="8d646787-fc8f-4bb4-96ab-7d6156a5a37e" x="0" y="0" width="571" height="1"/>
				<graphicElement>
					<pen lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement uuid="266aa9c6-eda3-4663-83e7-3ea773c7eb06" x="210" y="1" width="164" height="11"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<textField pattern="#,##0.00">
				<reportElement uuid="cd92292f-28fc-457d-8f16-ebe28ffa2ce4" x="382" y="1" width="58" height="11"/>
				<textElement textAlignment="Right">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{Tcomplet}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="06864200-3354-40a3-9253-3745ad572773" x="0" y="82" width="172" height="13"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA['Print By : '+$F{nmuser}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="665929c9-0a85-4e38-a7d4-1b89ae30bc0a" x="417" y="28" width="126" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Penerima,]]></text>
			</staticText>
			<textField>
				<reportElement uuid="ab511fc4-b900-445c-999e-5ac1bfbc0f5e" x="357" y="12" width="186" height="11"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA['Bandar Lampung, '+
new SimpleDateFormat("dd/MM/yyyy").format($F{tgltrx})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="aec41041-97d9-4e8b-a8bd-1b437177219b" x="417" y="71" width="126" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[(                                           )]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a5c706e3-7e23-4259-b3f7-0620b6d69af0" x="275" y="71" width="126" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[(                                           )]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5e8ecc8f-d005-46a8-a42a-98f018b6485e" x="275" y="28" width="126" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Disetor oleh,]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3eaadafd-f086-40e9-89ba-8c8ada23b081" x="134" y="71" width="126" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[(                                           )]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="16519db5-9622-453f-b35b-f5f3ce278daf" x="134" y="28" width="126" height="11"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Disetujui,]]></text>
			</staticText>
		</band>
	</lastPageFooter>
</jasperReport>

<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportStatusPayment" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="181fa72b-1634-4067-9d5a-c05e15ec9984">
	<property name="ireport.zoom" value="1.7715610000000022"/>
	<property name="ireport.x" value="58"/>
	<property name="ireport.y" value="0"/>
	<parameter name="AD_Org_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[1000008]]></defaultValueExpression>
	</parameter>
	<parameter name="StartDate" class="java.sql.Timestamp">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="EndDate" class="java.sql.Timestamp">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="C_DocType" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT ao.name AS Departement, cp.datetrx AS DateTransaction, concat(cba.accountno,'_',cb.name) AS AccountName,
CASE WHEN cp.c_payment_id = cbsl.c_payment_id THEN 'Selesai' WHEN cbsl.c_payment_id IS NULL THEN 'Dalam Proses' END AS Status, cd.name AS DocType, cbp.name AS BusinessPartner,  cc.name AS Biaya, co.documentno AS NoPO, ci.documentno AS NoInvoice, CASE WHEN cc.name IS NULL AND co.documentno IS NULL THEN concat('Invoice', ' ', ci.documentno) WHEN cc.name IS NULL AND ci.documentno IS NULL THEN concat ('PO', ' ', co.documentno) WHEN co.documentno IS NULL AND ci.documentno IS NULL THEN cc.name END AS Transaksi,
cp.payamt AS PayAmount, ccr.iso_code AS Currency, cbsl.transactiontype

FROM c_payment cp

INNER JOIN ad_org ao ON ao.ad_org_id = cp.ad_org_id

INNER JOIN c_bankaccount cba ON cba.c_bankaccount_id = cp.c_bankaccount_id

INNER JOIN c_bank cb ON cb.c_bank_id = cba.c_bank_id

INNER JOIN c_doctype cd ON cd.c_doctype_id = cp.c_doctype_id

INNER JOIN c_bpartner cbp ON cbp.c_bpartner_id = cp.c_bpartner_id

LEFT JOIN c_charge cc ON cc.c_charge_id = cp.c_charge_id

LEFT JOIN c_order co ON co.c_order_id = cp.c_order_id

LEFT JOIN c_paymentallocate cpa ON cpa.c_payment_id = cp.c_payment_id

LEFT JOIN c_invoice ci ON ci.c_invoice_id = cpa.c_invoice_id

INNER JOIN c_currency ccr ON ccr.c_currency_id = cp.c_currency_id

LEFT JOIN c_bankstatementline cbsl ON cbsl.c_payment_id = cp.c_payment_id

LEFT JOIN c_bankstatement cbs ON cbs.c_bankstatement_id = cbsl.c_bankstatement_id

WHERE cp.docstatus = 'CO' AND ao.ad_org_id = $P{AD_Org_ID} AND cp.datetrx between $P{StartDate} AND $P{EndDate} AND

case when ($P{C_DocType} is null OR $P{C_DocType} = 0) then 1 = 1

else cd.c_doctype_id = $P{C_DocType} END

ORDER BY AccountName, Status DESC, cd.name, cp.datetrx]]>
	</queryString>
	<field name="departement" class="java.lang.String"/>
	<field name="datetransaction" class="java.sql.Timestamp"/>
	<field name="accountname" class="java.lang.String"/>
	<field name="status" class="java.lang.String"/>
	<field name="doctype" class="java.lang.String"/>
	<field name="businesspartner" class="java.lang.String"/>
	<field name="biaya" class="java.lang.String"/>
	<field name="nopo" class="java.lang.String"/>
	<field name="noinvoice" class="java.lang.String"/>
	<field name="transaksi" class="java.lang.String"/>
	<field name="payamount" class="java.math.BigDecimal"/>
	<field name="currency" class="java.lang.String"/>
	<field name="transactiontype" class="java.lang.String"/>
	<variable name="number" class="java.lang.Integer" resetType="Group" resetGroup="Status">
		<variableExpression><![CDATA[($V{number} == null) ?1 : $V{number} +1]]></variableExpression>
	</variable>
	<group name="Bank/CashAccount">
		<groupExpression><![CDATA[$F{accountname}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<staticText>
					<reportElement uuid="e7c83381-9367-454f-bbc7-a300b6d73a6a" x="0" y="0" width="77" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Kas / Bank]]></text>
				</staticText>
				<textField>
					<reportElement uuid="f4332f86-e7a6-40cb-8abb-ace5e57294e4" x="90" y="0" width="465" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<topPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{accountname}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="4cb12e90-eaf5-4290-ad7b-40ab0bb0f77b" x="76" y="0" width="15" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<topPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[:]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="20"/>
		</groupFooter>
	</group>
	<group name="Status">
		<groupExpression><![CDATA[$F{status}]]></groupExpression>
		<groupHeader>
			<band height="40">
				<textField>
					<reportElement uuid="384f4ab2-4bf7-47d6-86ec-f20372f36eb2" x="90" y="0" width="465" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<topPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{status}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="3ca694dc-c2e7-4fcb-81c4-7055a4654184" x="76" y="0" width="15" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<topPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[:]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="9a05609d-057b-44d8-a8bf-72fefd66c4ca" x="0" y="0" width="77" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Status Pembayaran]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="7172a242-880a-43f2-82e5-63938dde03db" x="298" y="20" width="111" height="20"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Biaya]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="4ef930d0-4d34-44e3-8f2d-8f86ff7e4f8c" x="102" y="20" width="86" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Tanggal Transaksi]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="51bce04a-ae5d-4fb3-bed0-f007529ac08e" x="496" y="20" width="59" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Mata Uang]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="aa60e71a-bba6-4532-89ed-1a104bab0964" x="188" y="20" width="110" height="20"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Outlet]]></text>
				</staticText>
				<textField pattern="#,##0.00">
					<reportElement uuid="695fbc85-e102-4220-a2af-3f1eb7d33fdc" x="409" y="20" width="87" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{doctype}.replace("AR Receipt", "Jumlah Penerimaan").replace("AP Payment", "Jumlah Pembiayaan")]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="9c35e4c0-7847-48e1-9da8-f6c423f16959" x="33" y="20" width="69" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[Tipe Transaksi]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="a2ce3e93-73c9-4902-993c-e071e6dde77a" x="0" y="20" width="33" height="20"/>
					<box leftPadding="5" rightPadding="5">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<text><![CDATA[No]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement uuid="d3e1cb34-f293-44e7-a4b0-cf985fa26fb9" x="0" y="59" width="77" height="20"/>
				<box leftPadding="5" rightPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Tanggal Transaksi]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="a04baa16-a2df-4221-84e6-0b78aefc9bad" x="90" y="59" width="466" height="20"/>
				<box leftPadding="5" rightPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[""+new SimpleDateFormat("dd/MM/yyyy").format($P{StartDate})+" - "+new SimpleDateFormat("dd/MM/yyyy").format($P{EndDate})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="c1397db9-4c24-4537-927e-657c86f5bfe6" x="76" y="59" width="15" height="20"/>
				<box leftPadding="5" rightPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[:]]></text>
			</staticText>
			<line>
				<reportElement uuid="0b1479fe-6e1b-45a4-80bb-82e18062b5e4" x="-1" y="51" width="555" height="1"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Double"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement uuid="577d93a1-5c4f-494b-94fa-0bb0620e745f" x="0" y="0" width="555" height="44"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["LAPORAN STATUS PAYMENT\n"+$F{departement}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="20" splitType="Stretch">
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="91b28a3b-3e15-46f1-b6fa-07a3d22d17f4" x="102" y="0" width="86" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{datetransaction}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0b2cfcbf-6496-495a-9b2c-fc7c6175d009" x="188" y="0" width="110" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{businesspartner}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="64a1e61c-011e-4f4b-8b96-97ec6a4a9e64" x="298" y="0" width="111" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{transaksi}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="695fbc85-e102-4220-a2af-3f1eb7d33fdc" x="409" y="0" width="87" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{payamount}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="698ce04f-6fed-4f01-a1fa-fb12b4c8a5c9" x="496" y="0" width="59" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{currency}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="d88b9041-0507-4549-9223-27dc07aea218" x="0" y="0" width="33" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{number}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="842bbc9c-64de-48ab-be35-79d5e186df63" x="33" y="0" width="69" height="20"/>
				<box leftPadding="5" rightPadding="5">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{doctype}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement uuid="eba02e8f-4643-4c8f-a102-bc8990458ecf" x="436" y="0" width="101" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}+" /  "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement uuid="e484222b-d467-47f0-a0b1-d40b6ad85027" positionType="Float" x="536" y="0" width="19" height="20"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
